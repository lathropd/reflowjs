<!DOCTYPE html>
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>Reflow</title>
    <meta name="description" content="">
    <meta name="viewport" content="width=device-width">
    <script>
    if (location.protocol == 'http:' && !(location.href.match(/localhost/)))
      location.href = location.href.replace(/^http:/, 'https:');
    </script>
    <link href="http://fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,700,900" rel="stylesheet" type="text/css">
    <link href="static/css/reflow.css" rel="stylesheet" type="text/css">
    <link href="static/css/admin.css" rel="stylesheet" type="text/css">
    <link href="static/css/ajc.css" rel="stylesheet" type="text/css">

</head>
<body>
    <!--[if lt IE 7]>
    <p class="chromeframe">You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade your browser</a> or <a href="http://www.google.com/chromeframe/?redirect=true">activate Google Chrome Frame</a> to improve your experience.</p>
    <![endif]-->
    <div class="container">
      <h1>Reflow</h1>
      <h2>The AJC multimedia multimedia obit, event and topic tool</h2>
      <hr>
      <h4>Select to edit a page</h4>

      <div id="skybox">
        <div class="control">
          Drafts<br>
          <select size=5 style="overflow-y:scroll; padding:10px;
              min-width: 300px;" id="skyboxDraftList"></select>
        </div>
        <div class="control">
          Published<br>
          <select size=5 style="overflow-y:scroll;  padding:10px;
              min-width: 300px;" id="skyboxPubList"></select>
        </div>
          <div id="skyboxMessage"></div>
      </div>
      <div>
        <h4>
          Web Link <small>(for flatpage iFrame)</small>:
          <a href="" id="webUrl" target="_blank">
            this will populate automatically
          </a>
        </h4>
      </div>
			<hr>
  		<div id="sticky_toolbar">
  			<div>

					<button class="button blue-button save">Save</button>
          <button class="button blue-button publishing">Publish</button>
          <button class="button create">Create</button>
          <button class="button delete">Delete</button>
          <button class="button grey-button rename">Rename</button>

				</div>
				<hr>
      </div>
      <div class="left">
        <h1>Create/Edit a Page</h1>
        <form id="adminForm">
          <h4>Name <small><em>(required)</em></small></h4>
          <p>
            Enter the name as you intend it to be displayed.
            Use  <code>&amp;nbsp;</code> (the "non-breaking space") to control where the line break
            occurs.<br>
            <input id="name" name="name"/>
          </p>
          <h4>Headline <small><em>(optional)</em></small></h4>
          <p>
            This can be anything. It displays very, very large at the top. If
            there is a background it will have a 1 pixel white outline.
            <br>
            <input id="bigHeadline" name="bigHeadline"/>
          </p>
          <h2>Additional text elements</h2>
          <p>
            The following contain only text formatted in markdown and/or HTML.
            They shouldn't include multimedia elements.
          </p>

          <h4>Dates/Subhed <small><em>(optional)</em></small></h4>
          <p>
            Appear directly under the name. For obits should be year-of-birth hyphen
            year-of-death (e.g. 1955 - 2014).
            <br>
            <input id="mugshotDates" name="mugshotDates">
          </p>

          <h4>Short bio <small><em>(optional)</em></small></h4>
          <p>
            A few lines. Displays under the dates. A bullet list or short
            paragraph is best. Longer bio material should go in a multimedia
            block.
            <br>
            <!-- markdown input -->
            <textarea class="mdhtmlform-md" data-mdhtmlform-group="2" name="mugshotBio" id="mugshotBio"></textarea>
            <!-- html display -->
            <!--<div class="mdhtmlform-html" data-mdhtmlform-group="2"></div>-->
            <!-- html submissionn -->
            <textarea class="mdhtmlform-html" data-mdhtmlform-group="2" style="display: none;"></textarea>
          </p>

          <hr>

          <h4>Mugshot URL <small><em>(optional, but strongly encouraged)</em></small></h4>
          <input id="mugshotPhoto" name="mugshotPhoto"><br>

          <h4>Headline backdrop image URL <small><em>(optional)</em></small></h4>
          <input id="bigImage" name="bigImage"><br>

          <h4>Main multimedia block <small>(optional)</small></h4>
          <textarea class="mdhtmlform-md" data-mdhtmlform-group="0" name="bigMultimedia" id="bigMultimedia">## Write markdown in the textarea!</textarea>
          <div class="mdhtmlform-html" data-mdhtmlform-group="0"></div>
          <textarea class="mdhtmlform-html" data-mdhtmlform-group="0" style="display: none;"></textarea>


          <h4>Large multimedia blocks <small>(optional)</small></h4>

          <h5>Large #1</h5>
          <textarea class="mdhtmlform-md" data-mdhtmlform-group="1" name="boxTwo" id="boxTwo"></textarea>
          <div class="mdhtmlform-html" data-mdhtmlform-group="1" ></div>
          <textarea class="mdhtmlform-html" data-mdhtmlform-group="1" style="display: none;"></textarea>

          <h5>Large #2</h5>

          <textarea class="mdhtmlform-md" data-mdhtmlform-group="2" name="boxThree" id="boxThree"></textarea>

          <div class="mdhtmlform-html" data-mdhtmlform-group="2"></div>

          <textarea class="mdhtmlform-html" data-mdhtmlform-group="2" style="display: none;"></textarea>

          <h5>Large #3</h5>

          <textarea class="mdhtmlform-md" data-mdhtmlform-group="3" name="boxFour" id="boxFour"></textarea>

          <div class="mdhtmlform-html" data-mdhtmlform-group="3"></div>

          <textarea class="mdhtmlform-html" data-mdhtmlform-group="3" style="display: none;"></textarea>

          <h5>Large #4</h5>

          <textarea class="mdhtmlform-md" data-mdhtmlform-group="4" name="boxFive" id="boxFive"></textarea>

          <div class="mdhtmlform-html" data-mdhtmlform-group="4"></div>

          <textarea class="mdhtmlform-html" data-mdhtmlform-group="4" style="display: none;"></textarea>

          <h4>Small multimedia blocks <small>(optional)</small></h4>

          <h5>Small #1</h5>

          <textarea class="mdhtmlform-md" data-mdhtmlform-group="6" name="boxOne" id="boxOne"></textarea>

          <div class="mdhtmlform-html" data-mdhtmlform-group="6"></div>

          <textarea class="mdhtmlform-html" data-mdhtmlform-group="6" style="display: none;"></textarea>

          <h5>Small #2</h5>

          <textarea class="mdhtmlform-md" data-mdhtmlform-group="7" name="boxSix" id="boxSix"></textarea>

          <div class="mdhtmlform-html" data-mdhtmlform-group="7"></div>

          <textarea class="mdhtmlform-html" data-mdhtmlform-group="7" style="display: none;"></textarea>

          <h5>Small #3</h5>

          <textarea class="mdhtmlform-md" data-mdhtmlform-group="8" name="boxSeven" id="boxSeven"></textarea>

          <div class="mdhtmlform-html" data-mdhtmlform-group="8"></div>

          <textarea class="mdhtmlform-html" data-mdhtmlform-group="8" style="display: none;"></textarea>

          <h5>Small #4</h5>

          <textarea class="mdhtmlform-md" data-mdhtmlform-group="9" name="boxEight" id="boxEight"></textarea>

          <div class="mdhtmlform-html" data-mdhtmlform-group="9"></div>

          <textarea class="mdhtmlform-html" data-mdhtmlform-group="9" style="display: none;"></textarea>

          <h5>Small #5</h5>

          <textarea class="mdhtmlform-md" data-mdhtmlform-group="10" name="boxNine" id="boxNine"></textarea>

          <div class="mdhtmlform-html" data-mdhtmlform-group="10"></div>

          <textarea class="mdhtmlform-html" data-mdhtmlform-group="10" style="display: none;"></textarea>

          <h5>Small #6</h5>

          <textarea class="mdhtmlform-md" data-mdhtmlform-group="11" name="boxTen" id="boxTen"></textarea>

          <div class="mdhtmlform-html" data-mdhtmlform-group="11"></div>

          <textarea class="mdhtmlform-html" data-mdhtmlform-group="11" style="display: none;"></textarea>

        </form>

      </div>
      <div class="right">

        <h2 id="markdown">Really basic Markdown syntax</h2>
        <!-- insert  common stuff here -->
        <p>
          Since you may not know about Markdown, here's a quick primer: it's a
          quick way of marking up text to generate HTML (HTML can be mixed in).
        </p>
        <pre>
*Italics*

**Bold**

[Hyperlink](http://example.com/url)

![Image](http://example.com/image.png)

#Extra-large title (&lt;h1&gt;)
##Large  title (&lt;h2&gt;)
###Medium title (&lt;h3&gt;)
####Small  title (&lt;h4&gt;)

* Bullet Lists
* Of any
* length
        </pre>



				<h2>Images</h2>
				<p>
					These should be URLs to images. Upload them first to Medley. Use
					the URL displayed at the top of the Medley object next to the image
					preview once you save it, not the "view on site" URL.
					Please size them appropriately in an image editor.
				</p>

				<p>
					<em>Should be at least 256px wide. Preferably taller than it is wide.</em>
					This appears in the primary box along with the name and dates. It is
					quite possibly the most important thing on the page. Please search
					for an AJC photo, something from a government or official site
					or something with a creative commons license allowing reuse.
					<br>
				</p>

				<p>
					<em>Should be an at least 900px wide. PNG files are preferred.</em>
					This will appear full frame no matter how wide the use sets the page.
					The height will cleverly adjust, but please use a horizontal image.
					Vertical and square images will likely be too tall at larger screen
					widths. Exceptions can obviously be made if it looks good that way.
					The headline is aligned along the bottom of the image.
				</p>
				<hr>

				<h2>Multimedia blocks</h2>
				<p>
					These are the big elements that make up the page. <em>Remember, just
					because they're called "multimedia" doesn't mean they can't be
					text, tables, lists, etc.</em>
				</p>
				<p>
					See the <a href="#instructions">instructions below</a> for the
					explanation on how to fill these out. You can use HTML,
					<a href="#markdown">Markdown</a>, or <a href="#shortcuts">shortcuts</a>.
					As you enter information in the text fields, HTML and markdown will
					display in the preview underneath. <strong>Shortcuts do not preview,</strong> but can
					be checked by viewing the page before it's published.
				</p>


				<p>
					This will always appear next to or directly underneath the mugshot
					and brief bio. Videos and slideshows are encouraged, maps if neither
					of those are available. Except on small screens, it will have a
					minimum height approximately equal to the height of the mugshot
					block. <a href="#instructions">Instructions below</a>
				</p>


			<h1><a id="instructions"></a>Instructions for the multimedia blocks</h1>
			<p>
				These are the heart of the matter. They can contain maps, images,
				slideshows, Brightcove video, timelines, embeds and text
				formatted in Markdown or HTML.
			</p>
			<p>
				Items appear generally in the order entered, but the automatic
				layout attempts to put the puzzle together without a lot of
				awkward white space.
			</p>
			<p>
				If you're not happy with the layout at one of the widths, tweaking the
				order definitely makes a difference.
			</p>

			<h4>Want to make a table in one of your boxes?</h4>
			<p>
				Paste a table from a spreadsheet like Excel into the box below
				and it will generate the HTML in the box below. Copy and paste
				the result into a multimedia block.
			</p>
			<textarea id="tableGenerator" class="codeGenerator">
				Header1	Header2	Header3	Header4
				Cell1	Cell2	Cell3	Cell4
			</textarea>
			<br><br>
			<!-- code display -->
			<small>HTML</small>
			<br>
			<small><div class="generatedCode" id="tableCode"></div></small>
			<br><br>

			<h4>So, what's Markdown?</h4>
			<p>
				Markdown is a convenient format for quickly writing HTML without
				having to write HTML. But, you can also mix and match by including
				HTML.
			</p>
			<p>
				For example, text followed by a blank line becomes a &lt;p&gt;
				element. Lines starting with "* " become a bullet list.
			</p>
			<p>
				Once you get the hang of it, it's actually quite a bit easier than
				using a WYSIWYG editor, in part because we've used the flexibility
				to add shortcuts for common tasks: timelines, maps, Brightcove embeds
				and	slideshows.
			</p>
			<p>
				Because it's sometimes unfamiliar, the HTML version will appear
				below the text box you're entering.
			</p>

			<h4>Read the <a href="http://github.com/adam-p/markdown-here/wiki/Markdown-Cheatsheet" target="_blank">Markdown Cheat Sheet</a></h4>
			<h4>Or read <a href="https://daringfireball.net/projects/markdown/basics" target="_blank">a more complete explanation</a></h4>

			<br><br>
			<h4><a id="shortcuts"></a>AJC shortcuts</h4>
			<p>
				Each of following lets you quickly do something without the need
				for HTML, an embed code or using Markdown.
			</p>
			<ul>
				<li>
					<em>Google map with info window</em><br>
					Begin a block with "map" (all lower case) one one line, the address
					to map on a second line and the material for the info window on the
					third and subsequent lines. The info window can contain basic
					formatting. Use &lt;br&gt; to add line breaks within the window.
					Use a semicolon to indicate the end of your info window text and
					start the next address on the next line 
				</li>
				<small>
					<pre>
map
223 Perimeter Center Pkwy, Atlanta, GA 30346
The offices of the Atlanta Journal-Constitution are
lovely and the parking is much better
than it was downtown.
					</pre>
				</small>
				<li>
					<em>Slideshow</em><br>
					Begin a block with the word "slideshow" followed by the complete url for the RSS feed of an AJC
					slideshow (this is the "View on site" URL with "rss/" after "http://www.ajc.com/gallery/"). Any
					text on following lines will be ignored. Only horizontal
                    (wider than they are tall) or square images will display
                    correctly.
				</li>
				<small>
					<pre>
slideshow
http://www.ajc.com/gallery/rss/sports/golf/georgia-golfers-british-open/gCL8d/#5732554
					</pre>
				</small>
				<li>
					<em>Timeline</em><br>
					Begin a block with the word "timeline" followed
					by any headline or setup material, followed by a bullet list
					of timeline items.  Dates can be set on separate bullets or by making
					them headlines with the bullet. Images can be embedded by using their
					URL. Other things can be embedded with HTML. Consider whether the
					material would look better in a wide or narrow box.
				</li>
				<small>
					<pre>
timeline
##A headline
This is some setup text

* 1922
* #March
  Buys a Studebaker
* #May
  Crashes Studebaker
* 1924 - 1929
* http://users.humboldt.edu/ogayle/hist111/BuyBuyBuy.png Works on Wall Street
* 1929
* Stock market crash sets off the Great Depression.

You can also put text after the timeline.
					</pre>
				</small>
				<li>
					<em>Brightcove</em><br>
					Use a MyAJC.com Brightcove video's id number by itself on
					a line and it will automatically be placed in the correct, responsive
					player. <b>video must be from myajc.com</b>
				</li>
				<small>
					<pre>
3666574943001
					</pre>
				</small>
			</ul>
		</div>
  </div>


    <script src="//cdnjs.cloudflare.com/ajax/libs/dropbox.js/0.10.2/dropbox.min.js"></script>
    <script src="static/vendor/markdownform/vendor/modernizr-2.6.2.min.js"></script>
    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
    <script>window.jQuery || document.write('<script src="markdownform/vendor/jquery-1.9.1.min.js"><\/script>')</script>
    <script src="static/vendor/markdownform/plugins.js"></script>

    <!-- MDWYSIWYG Dependencies -->
    <script src="static/vendor/markdownform/vendor/showdown.js"></script> <!-- Include Showdown before MDWYSIWYG! -->
    <script src="static/vendor/markdownform/mdhtmlform.js"></script> <!-- The main MDWYSIWYG file -->
    <script src="static/js/admin.js"></script>
    <script src="static/vendor/js/sticky-toolbar.js"></script>
    <script type="text/javascript">
    $(document).ready( function () {
        form = $("#adminForm");
        form[0].reset();
        skyboxHTML = $(skybox).html();
        $(skybox).html(skyboxHTML);
        O = admin({
          client: new Dropbox.Client({key:'phovkvef0jhkx4i', token: 'zy9Bs1eG-scAAAAAAAABcENGysKLGOoM8mRzbrmwphmBrhHyB0cjm_eNbOd4Bi1i' }),
          form:form,
          skybox:skybox,
          folder: '',
          webUrl: 'https://lathropd.github.com/reflowjs/',
          previewUrl: 'https://lathropd.github.com/reflowjs/preview.html'
        });
        $("button.create").click(function(e){O.create();return false;});
        $("button.save").click(function(e){O.save();return false;});
        $("button.rename").click(function(e){O.rename();return false;});
        $("button.delete").click(function(e){O.deleteFile();return false;});
        $("button.publish").click(function(e){O.publish();return false;});
        $("textarea#tableGenerator").keyup(function () { textToTable($("textarea#tableGenerator"), $("#tableCode"));});
        $("textarea#tableGenerator").keyup();

    });
    </script>
</body>
</html>
